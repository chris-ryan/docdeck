<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link type="text/css" href="../style.css" rel="stylesheet"/>
  <title>DiabCRE - Knowledgebase</title>
</head>

<body>

  <!-- Header -->
  <header class="header">
    <div class="top">
        <h1>Diab CRE Knowledgebase</h1>
    </div>
  </header>

<div class="left-navbar">
</div>

<div class="main-content"><h3 id="connecting-a-node-express-app-to-mongodb">Connecting a Node/Express app to MongoDB</h3>
<p>Just like with everything else in the node universe, there are pre-built packages for interacting with MongoDB databases.</p>
<p>Let&#39;s install the most basic: mongodb in our Express API app.</p>
<p><code>npm install mongodb --save</code></p>
<p>Create a new file in the root of our project called: db-connect.js</p>
<pre><code><span class="hljs-keyword">var</span> mongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>);

mongoClient.connect(<span class="hljs-string">'mongodb://dev.diabcre.cloud:27017/mongotest'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, db</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected to MongoDB!"</span>);

    db.close();
});
</code></pre><p>run <code>node db-connect.js</code> and you should see the connection message outputted to your console.</p>
<h3 id="retrieving-a-document">Retrieving a document</h3>
<p>Within our client connect function, we&#39;ll use the findOne() method retrieve a patient...</p>
<pre><code><span class="hljs-keyword">var</span> mongoClient = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongodb'</span>);

mongoClient.connect(<span class="hljs-string">'mongodb://dev.diabcre.cloud:27017/mongotest'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, db</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Connected to MongoDB!"</span>);

    <span class="hljs-keyword">var</span> collection = db.collection(<span class="hljs-string">'patients'</span>);
    collection.findOne({<span class="hljs-string">'id'</span>: <span class="hljs-string">'10003'</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, doc</span>) </span>{
        <span class="hljs-built_in">console</span>.log(doc.id + <span class="hljs-string">" - "</span> + doc.name.family + <span class="hljs-string">", "</span> + doc.name.given);
    });

    db.close();
});
</code></pre></div></body></html>